<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>企业微信二维码自动化工具</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>企业微信二维码自动化工具</h1>
            <nav class="nav-tabs">
                <button id="mainTab" class="tab-btn active">主页</button>
                <button id="configTab" class="tab-btn">环境配置</button>
            </nav>
        </header>
        
        <main>
            <!-- 主功能页面 -->
            <div id="mainPanel" class="tab-content active">
                <div class="control-panel">
                    <button id="installBtn" class="btn btn-install" style="display: none;">安装Chromium</button>
                    <button id="checkLoginBtn" class="btn btn-info">检查企微登录</button>
                    <button id="stopBtn" class="btn btn-danger" disabled>停止执行</button>
                </div>
                
                <div id="progressPanel" class="progress-panel" style="display: none;">
                    <h3>安装进度</h3>
                    <div class="progress-bar">
                        <div id="progressBar" class="progress-fill"></div>
                    </div>
                    <div id="progressText" class="progress-text">0%</div>
                </div>
                
                <div class="status-panel">
                    <h3>状态信息</h3>
                    <div id="status" class="status-text">就绪</div>
                </div>
                
                <div class="login-status-panel">
                    <h3>企微登录状态</h3>
                    <div id="loginStatus" class="login-status">未检查</div>
                    <div id="loginDetails" class="login-details" style="display: none;">
                        <div class="detail-item">
                            <label>当前页面:</label>
                            <span id="currentUrl">-</span>
                        </div>
                        <div class="detail-item">
                            <label>页面标题:</label>
                            <span id="pageTitle">-</span>
                        </div>
                        <div class="detail-item">
                            <label>检查时间:</label>
                            <span id="checkTime">-</span>
                        </div>
                    </div>
                </div>
                
                <div class="log-panel">
                    <div class="log-header">
                        <h3>操作日志</h3>
                        <div class="log-controls">
                            <button id="clearLogsBtn" class="btn btn-small">清空日志</button>
                            <button id="autoScrollBtn" class="btn btn-small active" data-auto-scroll="true">自动滚动</button>
                        </div>
                    </div>
                    <div id="logs" class="log-container"></div>
                </div>
            </div>

            <!-- 配置管理页面 -->
            <div id="configPanel" class="tab-content">
                <div class="config-header">
                    <h2>环境配置管理</h2>
                    <div class="config-actions">
                        <button id="saveConfigBtn" class="btn btn-primary">保存配置</button>
                    </div>
                </div>
                
                <form id="configForm" class="config-form">
                    <!-- 基本配置 -->
                    <div class="config-section">
                        <h3>基本配置</h3>
                        <div class="form-group">
                            <label for="appName">应用名称</label>
                            <input type="text" id="appName" name="APP_NAME" required>
                        </div>
                    </div>

                    <!-- 自动化配置 -->
                    <div class="config-section">
                        <h3>自动化配置</h3>
                        <div class="form-group">
                            <label for="weworkContactUrl">企业微信通讯录链接</label>
                            <input type="url" id="weworkContactUrl" name="WEWORK_CONTACT_URL" required>
                            <small class="form-text">企业微信通讯录页面的完整URL</small>
                        </div>
                        <div class="form-group">
                            <label for="weworkCreateGroupUrl">群活码创建链接</label>
                            <input type="url" id="weworkCreateGroupUrl" name="WEWORK_CREATE_GROUP_LIVE_CODE_URL" required>
                            <small class="form-text">企业微信群活码创建页面的完整URL</small>
                        </div>
                        <div class="form-group">
                            <label for="userDataDir">用户数据目录</label>
                            <input type="text" id="userDataDir" name="USER_DATA_DIR" required>
                            <small class="form-text">浏览器数据存储目录，支持~表示用户主目录</small>
                        </div>
                        <div class="form-group">
                            <label for="storeAvatarPath">门店头像路径</label>
                            <input type="text" id="storeAvatarPath" name="STORE_AVATAR_PATH" required>
                            <small class="form-text">门店头像文件的本地路径</small>
                        </div>
                        <div class="form-group">
                            <label for="qrCodeStorePath">二维码存储路径</label>
                            <input type="text" id="qrCodeStorePath" name="QRCODE_TARGET_STORE_PATH" required>
                            <small class="form-text">二维码文件的存储根目录</small>
                        </div>
                        <div class="form-group">
                            <label for="weibanDashboard">微伴首页链接</label>
                            <input type="url" id="weibanDashboard" name="WEIBAN_DASHBOARD_URL" required>
                            <small class="form-text">微伴助手首页的完整URL</small>
                        </div>
                        <div class="form-group">
                            <label for="weibanQrCreate">微伴活码创建链接</label>
                            <input type="url" id="weibanQrCreate" name="WEIBAN_QR_CREATE_URL" required>
                            <small class="form-text">微伴渠道活码创建页面的完整URL</small>
                        </div>
                    </div>

                    <!-- 消息模板配置 -->
                    <div class="config-section">
                        <h3>消息模板配置</h3>
                        <div class="form-group">
                            <label for="weibanWelcomeMsg">店中店欢迎语</label>
                            <textarea id="weibanWelcomeMsg" name="WEIBAN_WELCOME_MSG" rows="4" required></textarea>
                            <small class="form-text">支持{{storeName}}变量和\n换行符</small>
                        </div>
                        <div class="form-group">
                            <label for="weibanWelcomeMsgIndependent">独立店欢迎语</label>
                            <textarea id="weibanWelcomeMsgIndependent" name="WEIBAN_WELCOME_MSG_INDEPENDENT" rows="4" required></textarea>
                            <small class="form-text">支持{{storeName}}变量和\n换行符</small>
                        </div>
                    </div>

                    <!-- 用户数据配置 -->
                    <div class="config-section">
                        <h3>用户数据配置</h3>
                        <div class="form-group">
                            <label for="userMappings">可用助手名单</label>
                            <div class="list-input-container">
                                <div id="userMappingsList" class="list-items"></div>
                                <div class="list-input-row">
                                    <input type="text" id="newUserMapping" placeholder="输入助手名称">
                                    <button type="button" id="addUserMapping" class="btn btn-small">添加</button>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="storeTypes">店铺类型选项</label>
                            <div class="list-input-container">
                                <div id="storeTypesList" class="list-items"></div>
                                <div class="list-input-row">
                                    <input type="text" id="newStoreType" placeholder="输入店铺类型">
                                    <button type="button" id="addStoreType" class="btn btn-small">添加</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </main>
    </div>
    
    <script src="renderer.js"></script>
</body>
</html>